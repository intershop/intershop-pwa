<div *ngIf="basket?.lineItems" class="cart-summary">
  <div *ngFor="let pli of basket.lineItems; index as i" class="row cart-summary-checkout">
    <ng-container *ngIf="isItemVisible(i)">
      <!-- product name and price -->
      <div class="col-8">
        <a [routerLink]="pli.product | ishProductRoute"> {{ pli.name }} </a>
      </div>
      <div class="col-4 text-right">{{ pli.totals.total | ishPrice }}</div>

      <!-- quantity and undiscounted price -->
      <div class="col-8 cart-pli-data">
        <span> {{ 'checkout.pli.qty.label' | translate }} {{ pli.quantity.value }} </span>
      </div>
      <div class="col-4 text-right">
        <div *ngIf="pli.totals.valueRebatesTotal" class="old-price">{{ pli.price | ishPrice }}</div>
        <div *ngIf="pli.isFreeGift" class="list-item-promo">{{ 'checkout.pli.freegift.text' | translate }}</div>
      </div>

      <div *ngIf="pli.valueRebates && pli.valueRebates.length > 0" class="col-12">
        <span *ngFor="let rebate of pli.valueRebates">
          <div *ngIf="rebate.promotion">
            <span [innerHTML]="rebate.promotion.title | safeHtml"></span>
            <ish-promotion-details [promotion]="rebate.promotion"></ish-promotion-details>
          </div>
        </span>
      </div>
    </ng-container>
  </div>

  <!-- 'Show All' and 'Hide All' links -->
  <a *ngIf="isShowAllLinkVisible()" (click)="toggleCollapse()">
    {{ 'checkout.show_all.link' | translate: { '0': basket.lineItems.length } }}&nbsp;
    <fa-icon [icon]="['fas', 'angle-down']"></fa-icon>
  </a>
  <a *ngIf="isHideLinkVisible()" (click)="toggleCollapse()">
    {{ 'checkout.hide_all.link' | translate }}&nbsp;
    <fa-icon [icon]="['fas', 'angle-up']"></fa-icon>
  </a>
</div>
