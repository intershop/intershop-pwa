<a id="order-list-top" title="top"></a>
<h1>{{ 'account.order_history.heading' | translate }}</h1>
<ish-error-message [error]="ordersError$ | async" />
<p class="section">{{ 'account.order.subtitle' | translate }}</p>

<ng-container *ngIf="orders$ | async as orders">
  <div [ngClass]="{ 'd-none': !filtersActive && orders.length <= 0 }">
    <ish-account-order-filters fragmentOnRouting="order-list-top" (modelChange)="loadFilteredOrders($event)" />
  </div>

  <ish-order-list
    [orders]="orders"
    [columnsToDisplay]="['creationDate', 'orderNoWithLink', 'lineItems', 'status', 'destination', 'orderTotal']"
    [noOrdersMessageKey]="
      !filtersActive
        ? 'account.orderlist.no_placed_orders_message'
        : 'account.order_history.filter.no_results_found_message'
    "
    [loading]="ordersLoading$ | async"
  />

  <div *ngIf="orders.length > 0 && moreOrdersAvailable$ | async" class="d-flex justify-content-center">
    <button class="btn btn-secondary" (click)="loadMoreOrders()" [disabled]="ordersLoading$ | async">
      {{ 'account.order.load_more' | translate }}
    </button>
  </div>
</ng-container>

<h4 class="form-text">{{ 'account.order.questions.title' | translate }}</h4>
<p
  class="form-text"
  [ishServerHtml]="
    'account.order.questions.note' | translate : { '0': 'page://page.helpdesk.pagelet2-Page', '1': 'route://contact' }
  "
></p>
