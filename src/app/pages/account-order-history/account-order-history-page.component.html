<a id="order-list-top" title="top"></a>
<h1>{{ 'account.order_history.heading' | translate }}</h1>
<ish-error-message [error]="ordersError$ | async" />
<p class="section">{{ 'account.order.subtitle' | translate }}</p>

<ish-account-order-filters
  fragmentOnRouting="order-list-top"
  (modelChange)="loadFilteredOrders($event)"
  [ngClass]="{ 'd-none': !filtersActive && !(orders$ | async)?.length }"
/>

<ish-order-list
  [orders]="ordersForPage$ | async"
  [columnsToDisplay]="columnsToDisplay$ | async"
  [noOrdersMessageKey]="
    !filtersActive
      ? 'account.orderlist.no_placed_orders_message'
      : 'account.order_history.filter.no_results_found_message'
  "
  [loading]="ordersLoading$ | async"
/>

<ng-container *ngIf="pagingInfo$ | async as paging">
  <div class="row" *ngIf="paging.total > pageSize">
    <div class="d-flex w-100 grey-panel align-items-center flex-wrap justify-content-between px-3 py-2 mb-3 mx-3">
      <span class="text-nowrap">{{
        'account.order_history.paging.items.label' | translate : { '0': paging.total }
      }}</span>
      <ish-paging
        [currentPage]="pageNumber$ | async"
        [lastPage]="getTotalPages(paging.total)"
        (goToPage)="loadMoreOrders($event)"
      />
    </div>
  </div>
</ng-container>

<h2 class="h4 form-text">{{ 'account.order.questions.title' | translate }}</h2>
<p
  class="form-text"
  [ishServerHtml]="
    'account.order.questions.note' | translate : { '0': 'page://page.helpdesk.pagelet2-Page', '1': 'route://contact' }
  "
></p>
