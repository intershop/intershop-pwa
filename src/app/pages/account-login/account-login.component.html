<h1>{{ 'account.login.heading' | translate }}</h1>
<div class="row" data-testing-id="account-login-page">
  <div class="col-md-6">
    <div class="section">
      <div *ngIf="!isLoggedIn">
        <h2>{{'account.login.returning_user.heading' | translate}}</h2>
        <p *ngIf="loginToUse" class="alert alert-info">{{'account.login.addresses.message' | translate}}</p>
        <div *ngIf="((errorUser && errorUser !== 'UserNotLoggedIn' && errorUser !== 'LoginAlreadyInUse'))" role="alert" class="alert alert-danger">
          {{ errorUser && (errorUser === '401 and Unauthorized' || errorUser === 'UnableToFindMembershipData') ? (registrationLoginType
          && registrationLoginType === 'username') ? ('account.login.username_password.error.invalid' | translate) : ('account.login.email_password.error.invalid'
          | translate) : ''}}

          <!-- TODO  -->
          <!-- Apply condition for other possible inputs -->
        </div>

        <form name="LoginUserForm" [formGroup]="loginForm" class="form-horizontal bv-form" (ngSubmit)="onSignin(loginForm.value)">
          <!-- Hidden Fields in ISML -->
          <p>{{'account.login.message' | translate}}</p>
          <div class="form-group has-feedback" [ngClass]="{'has-error' : loginForm.get('userName').invalid && loginForm.get('userName').dirty,'has-success':loginForm.get('userName').valid && loginForm.get('userName').dirty}">
            <label for="ShopLoginForm_Login" class="col-sm-3 control-label">{{registrationLoginType && registrationLoginType === 'username' ?'Username' : 'Email'}}</label>
            <div class="col-sm-6">
              <input class="form-control" formControlName="userName" name="ShopLoginForm_Login" type="{{registrationLoginType === 'username' ? 'text' : 'email'}}"
                id="ShopLoginForm_Login">
              <i class="form-control-feedback glyphicon glyphicon-remove" *ngIf="loginForm.get('userName').invalid && loginForm.get('userName').dirty"></i>
              <i class="form-control-feedback glyphicon glyphicon-ok" *ngIf="!loginForm.get('userName').invalid && loginForm.get('userName').dirty"></i>

              <is-control-messages *ngIf="registrationLoginType === 'email'" [control]="loginForm.controls.userName" [mesage]="{'required':'account.login.email.error.required' ,'validateEmail':'account.login.email.error.invalid'}"></is-control-messages>
              <is-control-messages *ngIf="registrationLoginType === 'username'"  [control]="loginForm.controls.userName" [mesage]="{'required':'account.login.username.error.required' }"></is-control-messages>

              <input class="form-control" formControlName="field" name="field" type="text" />
              <small *ngIf="loginForm.get('field').dirty && loginForm.get('userName').hasError('validateEmail')" class="help-block">
               Phone is invalid
              </small> 
              <!-- <small class="help-block" *ngIf="loginForm.get('userName').dirty && loginForm.get('userName').hasError('required')">
                {{registrationLoginType && registrationLoginType === 'username' ? ('account.login.username.error.required' | translate) : ('account.login.email.error.required' | translate)}}
              </small>
              <small *ngIf="loginForm.get('userName').dirty && loginForm.get('userName').hasError('validateEmail')" class="help-block">
                {{registrationLoginType && registrationLoginType === 'email' ?('account.login.email.error.invalid' | translate) : ''}}
              </small> -->
            </div>
            <i class="form-control-feedback" data-bv-icon-for="ShopLoginForm_Login"></i>
          </div>

          <div class="form-group has-feedback" [ngClass]="{'has-error' : loginForm.get('password').invalid && loginForm.get('password').dirty,'has-success':loginForm.get('password').valid && loginForm.get('password').dirty}">
            <label for="ShopLoginForm_Password" class="col-sm-3 control-label">Password</label>
            <div class="col-sm-6">
              <input formControlName="password" class="form-control" name="ShopLoginForm_Password" type="password" id="ShopLoginForm_Password">
              <i class="form-control-feedback glyphicon glyphicon-remove" *ngIf="loginForm.get('password').invalid && loginForm.get('password').dirty"></i>
              <i class="form-control-feedback glyphicon glyphicon-ok" *ngIf="!loginForm.get('password').invalid && loginForm.get('password').dirty"></i>
              <small class="help-block" *ngIf="loginForm.get('password').dirty && loginForm.get('password').hasError('required')">
                {{'account.login.password.error.required' | translate}}
              </small>
            </div>

          </div>
          <div class="form-group">
            <div class="col-sm-offset-3 col-sm-9">
              <button type="submit" value="Login" name="login" class="btn btn-primary" [disabled]="loginForm.invalid && loginForm.get('password').dirty && loginForm.get('userName').dirty">{{'account.signin.button.label' | translate}}</button>
              <a class="btn btn-link">{{'account.send_password.heading' | translate}}</a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <h2>{{'account.new_user.heading' | translate}}</h2>
    <p>{{'account.create.benefit.text' | translate}}</p>
    <ul>
      <li>{{'account.create.benefit1.text' | translate}}</li>
      <li>{{'account.create.benefit2.text' | translate}}</li>
      <li>{{'account.create.benefit3.text' | translate}}</li>
      <li>{{'account.create.benefit4.text' | translate}}</li>
      <li>{{'account.create.benefit5.text' | translate}}</li>
    </ul>
    <a class="btn btn-primary" href="javascript:void(0)" [routerLink]="['/register']">{{'account.create.button.label' | translate}}</a>
  </div>
</div>