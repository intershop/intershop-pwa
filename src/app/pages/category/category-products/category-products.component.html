<div
  class="family-page product-search-result"
  [attr.data-testing-id]="'family-page-' + category.uniqueId"
  id="family-page-top"
>
  <div class="marketing-area">
    <ish-content-viewcontext
      *ngIf="category.categoryRef"
      viewContextId="viewcontext.include.family.base.top"
      [callParameters]="{ Category: category.categoryRef }"
    />
  </div>

  <div class="row">
    <div class="col-md-3">
      <div class="navigation-panel" [ngbCollapse]="isCollapsed">
        <ish-category-navigation [uniqueId]="category.categoryPath[0]" />
        <br />
        <ish-filter-navigation [showCategoryFilter]="false" />
      </div>

      <button type="button" class="d-md-none mobile-filter-toggle btn btn-link btn-link-action" (click)="toggle()">
        {{ 'search.mobile.filter.trigger' | translate }}
        <fa-icon [icon]="['fas', isCollapsed ? 'angle-down' : 'angle-up']" />
      </button>

      <div class="marketing-area">
        <ish-content-viewcontext
          *ngIf="category.categoryRef"
          viewContextId="viewcontext.include.family.navigation"
          [callParameters]="{ Category: category.categoryRef }"
        />
      </div>
    </div>
    <div class="col-md-9">
      <ish-breadcrumb />
      <h1>{{ category.name }}</h1>

      <div class="marketing-area">
        <ish-content-viewcontext
          *ngIf="category.categoryRef"
          viewContextId="viewcontext.include.family.content.top"
          [callParameters]="{ Category: category.categoryRef }"
        />
      </div>

      <ish-product-listing
        [categoryId]="category.uniqueId"
        [productListingId]="{ type: 'category', value: category.uniqueId }"
        fragmentOnRouting="family-page-top"
      />

      <div class="marketing-area">
        <ish-content-viewcontext
          *ngIf="category.categoryRef"
          viewContextId="viewcontext.include.family.content.bottom"
          [callParameters]="{ Category: category.categoryRef }"
        />
      </div>
    </div>
  </div>

  <div class="marketing-area">
    <ish-content-viewcontext
      *ngIf="category.categoryRef"
      viewContextId="viewcontext.include.family.base.bottom"
      [callParameters]="{ Category: category.categoryRef }"
    />
  </div>
</div>
