<!-- Description -->
<!-- Quote Header ( shown once if quote request submitted ) -->
<ng-container *ngIf="state(quote) === 'Submitted'; else quotePending">
  <p>
    {{ 'quote.edit.submitted.your_quote_number.text' | translate }}
    <a [routerLink]="['/account/quotes', quote.id]">{{ quote.number }}</a>
  </p>
  <p
    [ishServerHtml]="
      'quote.edit.submitted.your_quote_request.text'
        | translate: { '0': 'route://account/quotes', '1': 'route://account' }
    "
  ></p>
  <p>{{ 'quote.edit.submitted.we_will_email.text' | translate: { '0': userEmail$ | async } }}</p>
</ng-container>

<ng-template #quotePending>
  <div *ngIf="state(quote) === 'Responded' && !isQuoteStarted" class="alert alert-info">
    {{ 'quote.error.not_started' | translate }}
  </div>
</ng-template>

<div class="row">
  <label class="col-4 col-md-3 col-xl-2 col-form-label">{{
    'quote.edit.unsubmitted.quote_no.label' | translate
  }}</label>
  <div class="col-8 col-md-9 col-xl-10">
    <p class="form-control-plaintext">{{ quote.number }}</p>
  </div>
</div>
<div class="row">
  <label class="col-4 col-md-3 col-xl-2 col-form-label">{{ 'quote.edit.unsubmitted.status.label' | translate }}</label>
  <div class="col-8 col-md-9 col-xl-10">
    <p class="form-control-plaintext"><ish-quote-state [quoteId]="quote.id"></ish-quote-state></p>
  </div>
</div>

<!-- Shows the valid from/to date  -->
<div *ngIf="state(quote) === 'Responded'" class="row">
  <label class="col-4 col-md-3 col-xl-2 col-form-label">{{ 'quote.edit.unsubmitted.valid.label' | translate }}</label>
  <div class="col-8 col-md-9 col-xl-10">
    <p class="form-control-plaintext">
      {{ asQuote(quote).validFromDate | ishDate: 'shortDate' }} -
      {{ asQuote(quote).validToDate | ishDate: 'shortDate' }}
    </p>
  </div>
</div>

<div class="section">
  <!-- displayName -->
  <div class="row has-feedback">
    <label class="col-4 col-md-3 col-xl-2 col-form-label">{{ 'quote.edit.unsubmitted.name.label' | translate }}</label>
    <div class="col-8 col-md-9 col-xl-10">
      <p class="form-control-plaintext">{{ quote.displayName }}</p>
    </div>
  </div>

  <div *ngIf="quote.description" class="row">
    <label for="quote-description" class="col-4 col-md-3 col-xl-2 col-form-label">{{
      'quote.edit.unsubmitted.comment.label' | translate
    }}</label>
    <div class="col-8 col-md-9 col-xl-10">
      <p class="form-control-plaintext">{{ quote.description }}</p>
    </div>
  </div>

  <div *ngIf="asQuote(quote).sellerComment" class="row">
    <label for="" class="col-4 col-md-3 col-xl-2 col-form-label">{{
      'quote.edit.unsubmitted.seller_comment.label' | translate
    }}</label>
    <div class="col-8 col-md-9 col-xl-10">
      <p class="form-control-plaintext">{{ asQuote(quote).sellerComment }}</p>
    </div>
  </div>
</div>

<div class="section">
  <h3>{{ 'quote.items.table.heading' | translate }}</h3>
  <ish-line-item-list
    *ngIf="quote.items"
    [lineItems]="quote.items"
    [editable]="false"
    lineItemViewType="availability"
    [total]="quote.total"
  ></ish-line-item-list>
</div>

<div *ngIf="quote.items && quote.type === 'Quote'" class="form-btn-group clearfix">
  <ng-container *ngIf="state(quote) === 'Responded' && isQuoteValid">
    <button type="submit" class="btn btn-primary float-right" name="add2cart" (click)="addToBasket()">
      {{ 'quote.edit.button.add_quote_to_cart.label' | translate }}
    </button>
  </ng-container>

  <button class="btn btn-secondary" name="copy" type="submit" (click)="copy()">
    {{ 'quote.edit.button.create_new_from_quote.label' | translate }}
  </button>

  <button
    *ngIf="state(quote) === 'Responded'"
    type="submit"
    id="button-reject"
    class="btn btn-secondary float-right"
    name="refuse"
    (click)="reject()"
  >
    {{ 'quote.edit.reject.button.reject.label' | translate }}
  </button>
</div>
